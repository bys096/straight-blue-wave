{"ast":null,"code":"import _defineProperty from\"/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Container}from\"react-bootstrap\";import React,{useRef,useState}from'react';import io from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MainPage(props){var socket=io();var myFaceRef=useRef(null);var muteRef=useRef(null);var cameraRef=useRef(null);var camerasRef=useRef(null);var callRef=useRef(null);var welcomeRef=useRef(null);var welcomeFormRef=useRef(null);var peerFaceRef=useRef(null);var myStreamRef=useRef(null);var _useState=useState(true),_useState2=_slicedToArray(_useState,2),hidden=_useState2[0],setHidden=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),welHidden=_useState4[0],setWelHidden=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),videoRefs=_useState6[0],setVideoRefs=_useState6[1];var myStream;var muted=false;var cameraOff=false;var roomName;var myPeerConnection;var myDataChannel;var peopleInRoom=1;var pcObj={};function getCameras(){return _getCameras.apply(this,arguments);}function _getCameras(){_getCameras=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var devices,cameras,currentCamera;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return navigator.mediaDevices.enumerateDevices();case 3:devices=_context5.sent;cameras=devices.filter(function(device){return device.kind===\"videoinput\";});currentCamera=myStream.getVideoTracks()[0];cameras.forEach(function(camera){var option=document.createElement(\"option\");option.value=camera.deviceId;option.innerText=camera.label;if(currentCamera.label===camera.label){option.selected=true;}camerasRef.current.appendChild(option);});_context5.next=12;break;case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);case 12:case\"end\":return _context5.stop();}},_callee5,null,[[0,9]]);}));return _getCameras.apply(this,arguments);}function getMedia(_x){return _getMedia.apply(this,arguments);}function _getMedia(){_getMedia=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(deviceId){var initialConstrains,cameraConstraints;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:initialConstrains={audio:true,video:{facingMode:\"user\"}};cameraConstraints={audio:true,video:{deviceId:{exact:deviceId}}};_context6.prev=2;_context6.next=5;return navigator.mediaDevices.getUserMedia(// deviceId가 있다면 특정 camera로, 없다면 셀프 카메라로 설정\ndeviceId?cameraConstraints:initialConstrains);case 5:myStream=_context6.sent;myFaceRef.current.srcObject=myStream;if(deviceId){_context6.next=10;break;}_context6.next=10;return getCameras();case 10:_context6.next=15;break;case 12:_context6.prev=12;_context6.t0=_context6[\"catch\"](2);console.log(_context6.t0);case 15:case\"end\":return _context6.stop();}},_callee6,null,[[2,12]]);}));return _getMedia.apply(this,arguments);}function handleMuteClick(){myStream.getAudioTracks().forEach(function(track){return track.enabled=!track.enabled;});if(!muted){muteRef.class.innerText=\"Unmute\";muted=true;}else{muteRef.class.innerText=\"Mute\";muted=false;}}function handleCameraClick(){myStream.getVideoTracks().forEach(function(track){return track.enabled=!track.enabled;});if(cameraOff){cameraRef.current.innerText=\"Turn Camera Off\";cameraOff=false;}else{cameraRef.current.innerText=\"Turn Camera On\";cameraOff=true;}}function handleCameraChange(){return _handleCameraChange.apply(this,arguments);}function _handleCameraChange(){_handleCameraChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){var videoTrack,videoSender;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:_context7.next=2;return getMedia(camerasRef.current.value);case 2:if(myPeerConnection){videoTrack=myStream.getVideoTracks()[0];videoSender=myPeerConnection.getSenders().find(function(sender){return sender.track.kind===\"video\";});videoSender.replaceTrack(videoTrack);}case 3:case\"end\":return _context7.stop();}},_callee7);}));return _handleCameraChange.apply(this,arguments);}function initCall(){return _initCall.apply(this,arguments);}function _initCall(){_initCall=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:setWelHidden(true);setHidden(false);_context8.next=4;return getMedia();case 4:case\"end\":return _context8.stop();}},_callee8);}));return _initCall.apply(this,arguments);}function handleWelcomeSubmit(_x2){return _handleWelcomeSubmit.apply(this,arguments);}function _handleWelcomeSubmit(){_handleWelcomeSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(event){var input;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:event.preventDefault();input=welcomeFormRef.current.querySelector(\"input\");// await initCall();\n// await getMedia();\n// 추후에 닉네임 추가\nif(socket.disconnected){socket.connect();}socket.emit(\"join_room\",input.value);roomName=input.value;input.value=\"\";case 6:case\"end\":return _context9.stop();}},_callee9);}));return _handleWelcomeSubmit.apply(this,arguments);}socket.on(\"reject_join\",function(){// Paint modal\n// paintModal(\"Sorry, The room is already full.\");\n// Erase names\n// const nicknameContainer = document.querySelector(\"#userNickname\");\n// nicknameContainer.innerText = \"\";\nroomName=\"\";// nickname = \"\";\n});socket.on(\"accept_join\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userObjArr){var length,i,newPC,offer;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return initCall();case 2:length=userObjArr.length;if(!(length===1)){_context.next=5;break;}return _context.abrupt(\"return\");case 5:i=0;case 6:if(!(i<length-1)){_context.next=23;break;}_context.prev=7;newPC=createConnection(userObjArr[i].socketId// userObjArr[i].nickname\n);_context.next=11;return newPC.createOffer();case 11:offer=_context.sent;_context.next=14;return newPC.setLocalDescription(offer);case 14:socket.emit(\"offer\",offer,userObjArr[i].socketId);// writeChat(`__${userObjArr[i].nickname}__`, NOTICE_CN);\n_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](7);console.error(_context.t0);case 20:++i;_context.next=6;break;case 23:case\"end\":return _context.stop();}},_callee,null,[[7,17]]);}));return function(_x3){return _ref.apply(this,arguments);};}());socket.on(\"offer\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(offer,remoteSocketId){var newPC,answer;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;newPC=createConnection(remoteSocketId);_context2.next=4;return newPC.setRemoteDescription(offer);case 4:_context2.next=6;return newPC.createAnswer();case 6:answer=_context2.sent;_context2.next=9;return newPC.setLocalDescription(answer);case 9:socket.emit(\"answer\",answer,remoteSocketId);// writeChat(`notice! __${remoteNickname}__ joined the room`, NOTICE_CN);\n_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 15:case\"end\":return _context2.stop();}},_callee2,null,[[0,12]]);}));return function(_x4,_x5){return _ref2.apply(this,arguments);};}());socket.on(\"answer\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(answer,remoteSocketId){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return pcObj[remoteSocketId].setRemoteDescription(answer);case 2:case\"end\":return _context3.stop();}},_callee3);}));return function(_x6,_x7){return _ref3.apply(this,arguments);};}());socket.on(\"ice\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(ice,remoteSocketId){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return pcObj[remoteSocketId].addIceCandidate(ice);case 2:case\"end\":return _context4.stop();}},_callee4);}));return function(_x8,_x9){return _ref4.apply(this,arguments);};}());socket.on(\"chat\",function(message){// writeChat(message);\n});socket.on(\"leave_room\",function(leavedSocketId){// removeVideo(leavedSocketId);\n// writeChat(`notice! ${nickname} leaved the room.`, NOTICE_CN);\n// --peopleInRoom;\n// sortStreams();\n});// RTC code\nfunction createConnection(remoteSocketId){var myPeerConnection=new RTCPeerConnection({iceServers:[{urls:[\"stun:stun.l.google.com:19302\",\"stun:stun1.l.google.com:19302\",\"stun:stun2.l.google.com:19302\",\"stun:stun3.l.google.com:19302\",\"stun:stun4.l.google.com:19302\"]}]});myPeerConnection.addEventListener(\"icecandidate\",function(event){handleIce(event,remoteSocketId);});myPeerConnection.addEventListener(\"track\",function(event){handleAddStream(event,remoteSocketId);});// myPeerConnection.addEventListener(\n//   \"iceconnectionstatechange\",\n//   handleConnectionStateChange\n// );\nmyStream//\n.getTracks().forEach(function(track){return myPeerConnection.addTrack(track,myStream);});pcObj[remoteSocketId]=myPeerConnection;++peopleInRoom;// sortStreams();\nreturn myPeerConnection;}function handleIce(event,remoteSocketId){if(event.candidate){socket.emit(\"ice\",event.candidate,remoteSocketId);}}function handleAddStream(event,remoteSocketId){var peerStream=event.streams[0];paintPeerFace(peerStream,remoteSocketId);}function paintPeerFace(peerStream,id){var streams=myStreamRef.current;var videoRef=videoRefs[id];if(videoRef){videoRef.current.srcObject=peerStream;}else{var newVideoRef=/*#__PURE__*/React.createRef();setVideoRefs(_objectSpread(_objectSpread({},videoRefs),{},_defineProperty({},id,newVideoRef)));var div=document.createElement(\"div\");div.id=id;var video=document.createElement(\"video\");video.autoplay=true;video.playsInline=true;video.width=\"400\";video.height=\"400\";video.srcObject=peerStream;videoRef=newVideoRef;videoRef.current=video;div.appendChild(video);streams.appendChild(div);}}// function sortStreams() {\n//   const streams = document.querySelector(\"#streams\");\n//   const streamArr = streams.querySelectorAll(\"div\");\n//   streamArr.forEach((stream) => (stream.className = `people${peopleInRoom}`));\n// }\nreturn/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uC601\\uC0C1\\uD1B5\\uD654\"}),/*#__PURE__*/_jsx(\"div\",{className:\"video\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{id:\"welcome\",ref:welcomeRef,style:{display:welHidden?\"none\":\"block\"},children:/*#__PURE__*/_jsxs(\"form\",{ref:welcomeFormRef,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"room name\",required:true,type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleWelcomeSubmit,children:\"Enter room\"})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"call\",ref:callRef,style:{display:hidden?\"none\":\"block\"},children:/*#__PURE__*/_jsxs(\"div\",{id:\"myStream\",ref:myStreamRef,children:[/*#__PURE__*/_jsx(\"video\",{id:\"myFace\",ref:myFaceRef,autoPlay:true,playsInline:true,width:\"400\",height:\"400\"}),/*#__PURE__*/_jsx(\"button\",{id:\"mute\",ref:muteRef,onClick:handleMuteClick,children:\"Mute\"}),/*#__PURE__*/_jsx(\"button\",{id:\"camera\",ref:cameraRef,onClick:handleCameraClick,children:\"Turn Camera Off\"}),/*#__PURE__*/_jsx(\"select\",{id:\"cameras\",ref:camerasRef,onChange:handleCameraChange}),/*#__PURE__*/_jsx(\"video\",{id:\"peerFace\",ref:peerFaceRef,autoPlay:true,playsInline:true,width:\"400\",height:\"400\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleWelcomeSubmit,children:\"teset\"})]})})]});}export default MainPage;","map":{"version":3,"names":["Container","React","useRef","useState","io","jsx","_jsx","jsxs","_jsxs","MainPage","props","socket","myFaceRef","muteRef","cameraRef","camerasRef","callRef","welcomeRef","welcomeFormRef","peerFaceRef","myStreamRef","_useState","_useState2","_slicedToArray","hidden","setHidden","_useState3","_useState4","welHidden","setWelHidden","_useState5","_useState6","videoRefs","setVideoRefs","myStream","muted","cameraOff","roomName","myPeerConnection","myDataChannel","peopleInRoom","pcObj","getCameras","_getCameras","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee5","devices","cameras","currentCamera","wrap","_callee5$","_context5","prev","next","navigator","mediaDevices","enumerateDevices","sent","filter","device","kind","getVideoTracks","forEach","camera","option","document","createElement","value","deviceId","innerText","label","selected","current","appendChild","t0","console","log","stop","getMedia","_x","_getMedia","_callee6","initialConstrains","cameraConstraints","_callee6$","_context6","audio","video","facingMode","exact","getUserMedia","srcObject","handleMuteClick","getAudioTracks","track","enabled","class","handleCameraClick","handleCameraChange","_handleCameraChange","_callee7","videoTrack","videoSender","_callee7$","_context7","getSenders","find","sender","replaceTrack","initCall","_initCall","_callee8","_callee8$","_context8","handleWelcomeSubmit","_x2","_handleWelcomeSubmit","_callee9","event","input","_callee9$","_context9","preventDefault","querySelector","disconnected","connect","emit","on","_ref","_callee","userObjArr","length","i","newPC","offer","_callee$","_context","abrupt","createConnection","socketId","createOffer","setLocalDescription","error","_x3","_ref2","_callee2","remoteSocketId","answer","_callee2$","_context2","setRemoteDescription","createAnswer","_x4","_x5","_ref3","_callee3","_callee3$","_context3","_x6","_x7","_ref4","_callee4","ice","_callee4$","_context4","addIceCandidate","_x8","_x9","message","leavedSocketId","RTCPeerConnection","iceServers","urls","addEventListener","handleIce","handleAddStream","getTracks","addTrack","candidate","peerStream","streams","paintPeerFace","id","videoRef","newVideoRef","createRef","_objectSpread","_defineProperty","div","autoplay","playsInline","width","height","children","className","ref","style","display","placeholder","required","type","onClick","autoPlay","onChange"],"sources":["/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/src/pages/MainPage.js"],"sourcesContent":["import {Container} from \"react-bootstrap\";\nimport React, {useRef, useState} from 'react';\nimport io from 'socket.io-client';\n\nfunction MainPage(props) {\n\n\tconst socket = io();\n    const myFaceRef = useRef(null);\n    const muteRef = useRef(null);\n    const cameraRef = useRef(null);\n    const camerasRef = useRef(null);\n    const callRef = useRef(null);\n    const welcomeRef = useRef(null);\n    const welcomeFormRef = useRef(null);\n    const peerFaceRef = useRef(null);\n    const myStreamRef = useRef(null);\n    const [hidden, setHidden] = useState(true);\n    const [welHidden, setWelHidden] = useState(false);\n    const [videoRefs, setVideoRefs] = useState({});\n\n\n    let myStream;\n    let muted = false;\n    let cameraOff = false;\n    let roomName;\n    let myPeerConnection;\n    let myDataChannel;\n    let peopleInRoom = 1;\n\n    let pcObj = {};\nasync function getCameras() {\n  try {\n    const devices = await navigator.mediaDevices.enumerateDevices();\n    const cameras = devices.filter((device) => device.kind === \"videoinput\");\n    const currentCamera = myStream.getVideoTracks()[0];\n    cameras.forEach((camera) => {\n      const option = document.createElement(\"option\");\n      option.value = camera.deviceId;\n      option.innerText = camera.label;\n      if (currentCamera.label === camera.label) {\n        option.selected = true;\n      }\n      camerasRef.current.appendChild(option);\n    });\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nasync function getMedia(deviceId) {\n  const initialConstrains = {\n    audio: true,\n    video: { facingMode: \"user\" },\n  };\n  const cameraConstraints = {\n    audio: true,\n    video: { deviceId: { exact: deviceId } },\n  };\n  try {\n    myStream = await navigator.mediaDevices.getUserMedia(\n      // deviceId가 있다면 특정 camera로, 없다면 셀프 카메라로 설정\n      deviceId ? cameraConstraints : initialConstrains\n    );\n    myFaceRef.current.srcObject = myStream;\n    if (!deviceId) {\n      await getCameras();\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nfunction handleMuteClick() {\n  myStream\n    .getAudioTracks()\n    .forEach((track) => (track.enabled = !track.enabled));\n  if (!muted) {\n    muteRef.class.innerText = \"Unmute\";\n    muted = true;\n  } else {\n    muteRef.class.innerText = \"Mute\";\n    muted = false;\n  }\n}\nfunction handleCameraClick() {\n  myStream\n    .getVideoTracks()\n    .forEach((track) => (track.enabled = !track.enabled));\n  if (cameraOff) {\n    cameraRef.current.innerText = \"Turn Camera Off\";\n    cameraOff = false;\n  } else {\n    cameraRef.current.innerText = \"Turn Camera On\";\n    cameraOff = true;\n  }\n}\n\nasync function handleCameraChange() {\n  // select 한 camera id를 기준으로 다시 getMedia를 통해 미디어 스트림을 가져옴\n  await getMedia(camerasRef.current.value);\n  if (myPeerConnection) {\n    const videoTrack = myStream.getVideoTracks()[0];\n    const videoSender = myPeerConnection\n      .getSenders()\n      .find((sender) => sender.track.kind === \"video\");\n    videoSender.replaceTrack(videoTrack);\n  }\n}\n\n\n\n\nasync function initCall() {\n  setWelHidden(true);\n  setHidden(false);\n  await getMedia();\n  // myPeerConnection = makeConnection(); // 수정된 부분\n}\n\nasync function handleWelcomeSubmit(event) {\n  event.preventDefault();\n  const input = welcomeFormRef.current.querySelector(\"input\");\n  // await initCall();\n  // await getMedia();\n  // 추후에 닉네임 추가\n\n  if(socket.disconnected) {\n    socket.connect();\n  }\n  socket.emit(\"join_room\", input.value);\n  roomName = input.value;\n  input.value = \"\";\n}\n\n\n\nsocket.on(\"reject_join\", () => {\n  // Paint modal\n  // paintModal(\"Sorry, The room is already full.\");\n\n  // Erase names\n  // const nicknameContainer = document.querySelector(\"#userNickname\");\n  // nicknameContainer.innerText = \"\";\n  roomName = \"\";\n  // nickname = \"\";\n});\n\nsocket.on(\"accept_join\", async (userObjArr) => {\n  await initCall();\n\n  const length = userObjArr.length;\n  if (length === 1) {\n    return;\n  }\n\n  // writeChat(\"Notice!\", NOTICE_CN);\n  for (let i = 0; i < length - 1; ++i) {\n    try {\n      const newPC = createConnection(\n        userObjArr[i].socketId,\n        // userObjArr[i].nickname\n      );\n      const offer = await newPC.createOffer();\n      await newPC.setLocalDescription(offer);\n      socket.emit(\"offer\", offer, userObjArr[i].socketId);\n      // writeChat(`__${userObjArr[i].nickname}__`, NOTICE_CN);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n  // writeChat(\"is in the room.\", NOTICE_CN);\n});\n\nsocket.on(\"offer\", async (offer, remoteSocketId) => {\n  try {\n    const newPC = createConnection(remoteSocketId);\n    await newPC.setRemoteDescription(offer);\n    const answer = await newPC.createAnswer();\n    await newPC.setLocalDescription(answer);\n    socket.emit(\"answer\", answer, remoteSocketId);\n    // writeChat(`notice! __${remoteNickname}__ joined the room`, NOTICE_CN);\n  } catch (err) {\n    console.error(err);\n  }\n});\n\nsocket.on(\"answer\", async (answer, remoteSocketId) => {\n  await pcObj[remoteSocketId].setRemoteDescription(answer);\n});\n\nsocket.on(\"ice\", async (ice, remoteSocketId) => {\n  await pcObj[remoteSocketId].addIceCandidate(ice);\n});\n\nsocket.on(\"chat\", (message) => {\n  // writeChat(message);\n});\n\nsocket.on(\"leave_room\", (leavedSocketId) => {\n  // removeVideo(leavedSocketId);\n  // writeChat(`notice! ${nickname} leaved the room.`, NOTICE_CN);\n  // --peopleInRoom;\n  // sortStreams();\n});\n\n// RTC code\n\nfunction createConnection(remoteSocketId) {\n  const myPeerConnection = new RTCPeerConnection({\n    iceServers: [\n      {\n        urls: [\n          \"stun:stun.l.google.com:19302\",\n          \"stun:stun1.l.google.com:19302\",\n          \"stun:stun2.l.google.com:19302\",\n          \"stun:stun3.l.google.com:19302\",\n          \"stun:stun4.l.google.com:19302\",\n        ],\n      },\n    ],\n  });\n  myPeerConnection.addEventListener(\"icecandidate\", (event) => {\n    handleIce(event, remoteSocketId);\n  });\n  myPeerConnection.addEventListener(\"track\", (event) => {\n    handleAddStream(event, remoteSocketId);\n  });\n  // myPeerConnection.addEventListener(\n  //   \"iceconnectionstatechange\",\n  //   handleConnectionStateChange\n  // );\n  myStream //\n    .getTracks()\n    .forEach((track) => myPeerConnection.addTrack(track, myStream));\n\n  pcObj[remoteSocketId] = myPeerConnection;\n\n  ++peopleInRoom;\n  // sortStreams();\n  return myPeerConnection;\n}\n\nfunction handleIce(event, remoteSocketId) {\n  if (event.candidate) {\n    socket.emit(\"ice\", event.candidate, remoteSocketId);\n  }\n}\n\nfunction handleAddStream(event, remoteSocketId) {\n  const peerStream = event.streams[0];\n  paintPeerFace(peerStream, remoteSocketId);\n}\n\nfunction paintPeerFace(peerStream, id) {\n  const streams = myStreamRef.current;\n\n  let videoRef = videoRefs[id];\n\n  if (videoRef) {\n    videoRef.current.srcObject = peerStream;\n  } else {\n    const newVideoRef = React.createRef();\n    setVideoRefs({ ...videoRefs, [id]: newVideoRef });\n\n    const div = document.createElement(\"div\");\n    div.id = id;\n    const video = document.createElement(\"video\");\n    video.autoplay = true;\n    video.playsInline = true;\n    video.width = \"400\";\n    video.height = \"400\";\n    video.srcObject = peerStream;\n\n    videoRef = newVideoRef;\n    videoRef.current = video;\n\n    div.appendChild(video);\n    streams.appendChild(div);\n  }\n}\n\n// function sortStreams() {\n//   const streams = document.querySelector(\"#streams\");\n//   const streamArr = streams.querySelectorAll(\"div\");\n//   streamArr.forEach((stream) => (stream.className = `people${peopleInRoom}`));\n// }\n\n\treturn (\n\t\t<Container>\n\t\t\t<h1>영상통화</h1>\n\t\t\t<div className=\"video\">\n        <div>\n            <div id=\"welcome\" ref={welcomeRef} \n                style={{display: welHidden ? \"none\" : \"block\"}}\n            >\n                <form ref={welcomeFormRef}>\n                    <input placeholder=\"room name\" required type=\"text\"/>\n                    <button onClick={handleWelcomeSubmit}>Enter room</button>\n                </form>\n            </div>\n            <div id=\"call\" ref={callRef}\n                style={{ display: hidden ? \"none\" : \"block\" }}\n            >\n                <div id=\"myStream\" ref={myStreamRef}>\n                    <video id=\"myFace\"ref={myFaceRef} autoPlay playsInline width=\"400\" height=\"400\"></video>\n                    <button id=\"mute\" ref={muteRef} onClick={handleMuteClick}>Mute</button>\n                    <button id=\"camera\" ref={cameraRef} onClick={handleCameraClick}>Turn Camera Off</button>\n                    <select id=\"cameras\" ref={camerasRef} onChange={handleCameraChange}></select>\n                    <video id=\"peerFace\" ref={peerFaceRef} autoPlay playsInline width=\"400\" height=\"400\"></video>\n                </div>\n            </div>\n            <button onClick={handleWelcomeSubmit}>teset</button>\n        </div>\n\t\t\t</div>\n\t\t</Container>\n\t);\n}\n\nexport default MainPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}