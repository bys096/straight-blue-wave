{"ast":null,"code":"import _slicedToArray from\"/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{Container,Row,Col,Form,Button,Nav,ButtonGroup}from\"react-bootstrap\";import axios from\"axios\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),user_id=_useState2[0],setId=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),user_pw=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoggedIn=_useState6[0],setIsLoggedIn=_useState6[1];var history=useNavigate();// axios 임시\n/* const onSubmit = async (e) => {\n        e.preventDefault();\n\n        try {\n            const response = await axios.post('http://localhost:8080/user/login', {\n              id,\n              password,\n            });\n      \n            if (response.data.success) {\n              sessionStorage.setItem('user', JSON.stringify(response.data.user));\n              history.push('/');\n            } else {\n              alert('Invalid credentials');\n            }\n          } catch (error) {\n            console.error('Login error:', error);\n            alert(\"로그인 에러!\");\n          }\n    }; */ // sessionStorage에 저장된 내용을 storedUser에 저장\nvar storedUser=sessionStorage.getItem(\"user\");var storedName=\"\";if(storedUser){var _JSON$parse=JSON.parse(storedUser),user_name=_JSON$parse.user_name;storedName=user_name;}var onSubmit=function onSubmit(e){e.preventDefault();if(storedUser){var _JSON$parse2=JSON.parse(storedUser),storedId=_JSON$parse2.user_id,storedPassword=_JSON$parse2.user_pw;if(user_id===storedId&&user_pw===storedPassword){setIsLoggedIn(true);history(\"/\");}else{alert(\"ID 혹은 비밀번호가 틀립니다.\");}}else{alert(\"해당 사용자가 존재하지 않습니다.\");}};//로그아웃시 sessionStorage에 저장된 내용 삭제\nvar handleLogout=function handleLogout(){sessionStorage.removeItem(\"user\");setIsLoggedIn(false);history(\"/\");setId(\"\");setPassword(\"\");};var onChangeId=function onChangeId(e){setId(e.target.value);};var onChangePassword=function onChangePassword(e){setPassword(e.target.value);};return/*#__PURE__*/_jsx(Container,{className:\"justify-content-end\",children:isLoggedIn?/*#__PURE__*/_jsx(Row,{className:\"justify-content-end\",children:/*#__PURE__*/_jsxs(Col,{xs:\"auto\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Hello, \",storedName]}),/*#__PURE__*/_jsxs(ButtonGroup,{className:\"mt-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleLogout,className:\"me-2\",children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"}),/*#__PURE__*/_jsx(Nav,{children:/*#__PURE__*/_jsx(Link,{to:\"/Update\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",children:\"\\uC815\\uBCF4\\uC218\\uC815\"})})})]})]})}):/*#__PURE__*/_jsx(Row,{className:\"justify-content-end\",children:/*#__PURE__*/_jsx(Col,{xs:\"auto\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:\"auto\",children:/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formId\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"ID :\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"id\",value:user_id,onChange:onChangeId,required:true})]})}),/*#__PURE__*/_jsx(Col,{xs:\"auto\",children:/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"P/W :\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",value:user_pw,onChange:onChangePassword,required:true})]})})]}),/*#__PURE__*/_jsxs(ButtonGroup,{className:\"mt-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"me-5\",children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(Link,{to:\"/SignUp\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"})})]})]})})})});};export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","Container","Row","Col","Form","Button","Nav","ButtonGroup","axios","jsxs","_jsxs","jsx","_jsx","Login","_useState","_useState2","_slicedToArray","user_id","setId","_useState3","_useState4","user_pw","setPassword","_useState5","_useState6","isLoggedIn","setIsLoggedIn","history","storedUser","sessionStorage","getItem","storedName","_JSON$parse","JSON","parse","user_name","onSubmit","e","preventDefault","_JSON$parse2","storedId","storedPassword","alert","handleLogout","removeItem","onChangeId","target","value","onChangePassword","className","children","xs","variant","onClick","to","Group","controlId","Label","Control","type","name","onChange","required"],"sources":["/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/src/pages/Login.js"],"sourcesContent":["import React, {useState} from \"react\";\nimport {Link, useNavigate} from \"react-router-dom\";\nimport {\n\tContainer,\n\tRow,\n\tCol,\n\tForm,\n\tButton,\n\tNav,\n\tButtonGroup,\n} from \"react-bootstrap\";\nimport axios from \"axios\";\n\nconst Login = () => {\n\tconst [user_id, setId] = useState(\"\");\n\tconst [user_pw, setPassword] = useState(\"\");\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\n\n\tconst history = useNavigate();\n\n\t// axios 임시\n\t/* const onSubmit = async (e) => {\n        e.preventDefault();\n\n        try {\n            const response = await axios.post('http://localhost:8080/user/login', {\n              id,\n              password,\n            });\n      \n            if (response.data.success) {\n              sessionStorage.setItem('user', JSON.stringify(response.data.user));\n              history.push('/');\n            } else {\n              alert('Invalid credentials');\n            }\n          } catch (error) {\n            console.error('Login error:', error);\n            alert(\"로그인 에러!\");\n          }\n    }; */\n\n\t// sessionStorage에 저장된 내용을 storedUser에 저장\n\tconst storedUser = sessionStorage.getItem(\"user\");\n\tlet storedName = \"\";\n\n\tif (storedUser) {\n\t\tconst {user_name} = JSON.parse(storedUser);\n\t\tstoredName = user_name;\n\t}\n\n\tconst onSubmit = (e) => {\n\t\te.preventDefault();\n\n\t\tif (storedUser) {\n\t\t\tconst {user_id: storedId, user_pw: storedPassword} = JSON.parse(storedUser);\n\t\t\tif (user_id === storedId && user_pw === storedPassword) {\n\t\t\t\tsetIsLoggedIn(true);\n\t\t\t\thistory(\"/\");\n\t\t\t} else {\n\t\t\t\talert(\"ID 혹은 비밀번호가 틀립니다.\");\n\t\t\t}\n\t\t} else {\n\t\t\talert(\"해당 사용자가 존재하지 않습니다.\");\n\t\t}\n\t};\n\n\t//로그아웃시 sessionStorage에 저장된 내용 삭제\n\tconst handleLogout = () => {\n\t\tsessionStorage.removeItem(\"user\");\n\t\tsetIsLoggedIn(false);\n\t\thistory(\"/\");\n\t\tsetId(\"\");\n\t\tsetPassword(\"\");\n\t};\n\n\tconst onChangeId = (e) => {\n\t\tsetId(e.target.value);\n\t};\n\n\tconst onChangePassword = (e) => {\n\t\tsetPassword(e.target.value);\n\t};\n\n\treturn (\n\t\t<Container className=\"justify-content-end\">\n\t\t\t{isLoggedIn ? (\n\t\t\t\t<Row className=\"justify-content-end\">\n\t\t\t\t\t<Col xs=\"auto\">\n\t\t\t\t\t\t<div>Hello, {storedName}</div>\n\t\t\t\t\t\t<ButtonGroup className=\"mt-2\">\n\t\t\t\t\t\t<Button variant=\"primary\" onClick={handleLogout} className=\"me-2\">\n\t\t\t\t\t\t\t로그아웃\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Nav>\n\t\t\t\t\t\t\t<Link to=\"/Update\">\n\t\t\t\t\t\t\t\t<Button variant=\"primary\">정보수정</Button>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Nav>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t) : (\n\t\t\t\t<Row className=\"justify-content-end\">\n\t\t\t\t\t<Col xs=\"auto\">\n\t\t\t\t\t\t<Form onSubmit={onSubmit}>\n\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t<Col xs=\"auto\">\n\t\t\t\t\t\t\t\t\t<Form.Group controlId=\"formId\">\n\t\t\t\t\t\t\t\t\t\t<Form.Label>ID :</Form.Label>\n\t\t\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"id\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={user_id}\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChangeId}\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t<Col xs=\"auto\">\n\t\t\t\t\t\t\t\t\t<Form.Group controlId=\"formPassword\">\n\t\t\t\t\t\t\t\t\t\t<Form.Label>P/W :</Form.Label>\n\t\t\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={user_pw}\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChangePassword}\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t<ButtonGroup className=\"mt-2\">\n\t\t\t\t\t\t\t\t<Button variant=\"primary\" type=\"submit\" className=\"me-5\">\n\t\t\t\t\t\t\t\t\t로그인\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Link to=\"/SignUp\">\n\t\t\t\t\t\t\t\t\t<Button variant=\"primary\">회원가입</Button>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t)}\n\t\t</Container>\n\t);\n};\n\nexport default Login;\n"],"mappings":"kJAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,KAAO,OAAO,CACrC,OAAQC,IAAI,CAAEC,WAAW,KAAO,kBAAkB,CAClD,OACCC,SAAS,CACTC,GAAG,CACHC,GAAG,CACHC,IAAI,CACJC,MAAM,CACNC,GAAG,CACHC,WAAW,KACL,iBAAiB,CACxB,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,IAAA,IAAAC,KAAA,gCAAAC,GAAA,IAAAC,IAAA,yBAE1B,GAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAA,CAAS,CACnB,IAAAC,SAAA,CAAyBhB,QAAQ,CAAC,EAAE,CAAC,CAAAiB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA9BG,OAAO,CAAAF,UAAA,IAAEG,KAAK,CAAAH,UAAA,IACrB,IAAAI,UAAA,CAA+BrB,QAAQ,CAAC,EAAE,CAAC,CAAAsB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAApCE,OAAO,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC3B,IAAAG,UAAA,CAAoCzB,QAAQ,CAAC,KAAK,CAAC,CAAA0B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA5CE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAEhC,GAAM,CAAAG,OAAO,CAAG3B,WAAW,EAAE,CAE7B;AACA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAnBC,CAqBA;AACA,GAAM,CAAA4B,UAAU,CAAGC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,CACjD,GAAI,CAAAC,UAAU,CAAG,EAAE,CAEnB,GAAIH,UAAU,CAAE,CACf,IAAAI,WAAA,CAAoBC,IAAI,CAACC,KAAK,CAACN,UAAU,CAAC,CAAnCO,SAAS,CAAAH,WAAA,CAATG,SAAS,CAChBJ,UAAU,CAAGI,SAAS,CACvB,CAEA,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,CAAC,CAAK,CACvBA,CAAC,CAACC,cAAc,EAAE,CAElB,GAAIV,UAAU,CAAE,CACf,IAAAW,YAAA,CAAqDN,IAAI,CAACC,KAAK,CAACN,UAAU,CAAC,CAA3DY,QAAQ,CAAAD,YAAA,CAAjBtB,OAAO,CAAqBwB,cAAc,CAAAF,YAAA,CAAvBlB,OAAO,CACjC,GAAIJ,OAAO,GAAKuB,QAAQ,EAAInB,OAAO,GAAKoB,cAAc,CAAE,CACvDf,aAAa,CAAC,IAAI,CAAC,CACnBC,OAAO,CAAC,GAAG,CAAC,CACb,CAAC,IAAM,CACNe,KAAK,CAAC,mBAAmB,CAAC,CAC3B,CACD,CAAC,IAAM,CACNA,KAAK,CAAC,oBAAoB,CAAC,CAC5B,CACD,CAAC,CAED;AACA,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CAC1Bd,cAAc,CAACe,UAAU,CAAC,MAAM,CAAC,CACjClB,aAAa,CAAC,KAAK,CAAC,CACpBC,OAAO,CAAC,GAAG,CAAC,CACZT,KAAK,CAAC,EAAE,CAAC,CACTI,WAAW,CAAC,EAAE,CAAC,CAChB,CAAC,CAED,GAAM,CAAAuB,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIR,CAAC,CAAK,CACzBnB,KAAK,CAACmB,CAAC,CAACS,MAAM,CAACC,KAAK,CAAC,CACtB,CAAC,CAED,GAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIX,CAAC,CAAK,CAC/Bf,WAAW,CAACe,CAAC,CAACS,MAAM,CAACC,KAAK,CAAC,CAC5B,CAAC,CAED,mBACCnC,IAAA,CAACX,SAAS,EAACgD,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CACxCzB,UAAU,cACVb,IAAA,CAACV,GAAG,EAAC+C,SAAS,CAAC,qBAAqB,CAAAC,QAAA,cACnCxC,KAAA,CAACP,GAAG,EAACgD,EAAE,CAAC,MAAM,CAAAD,QAAA,eACbxC,KAAA,QAAAwC,QAAA,EAAK,SAAO,CAACnB,UAAU,GAAO,cAC9BrB,KAAA,CAACH,WAAW,EAAC0C,SAAS,CAAC,MAAM,CAAAC,QAAA,eAC7BtC,IAAA,CAACP,MAAM,EAAC+C,OAAO,CAAC,SAAS,CAACC,OAAO,CAAEV,YAAa,CAACM,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,0BAElE,EAAS,cACTtC,IAAA,CAACN,GAAG,EAAA4C,QAAA,cACHtC,IAAA,CAACb,IAAI,EAACuD,EAAE,CAAC,SAAS,CAAAJ,QAAA,cACjBtC,IAAA,CAACP,MAAM,EAAC+C,OAAO,CAAC,SAAS,CAAAF,QAAA,CAAC,0BAAI,EAAS,EACjC,EACF,GACQ,GACT,EACD,cAENtC,IAAA,CAACV,GAAG,EAAC+C,SAAS,CAAC,qBAAqB,CAAAC,QAAA,cACnCtC,IAAA,CAACT,GAAG,EAACgD,EAAE,CAAC,MAAM,CAAAD,QAAA,cACbxC,KAAA,CAACN,IAAI,EAACgC,QAAQ,CAAEA,QAAS,CAAAc,QAAA,eACxBxC,KAAA,CAACR,GAAG,EAAAgD,QAAA,eACHtC,IAAA,CAACT,GAAG,EAACgD,EAAE,CAAC,MAAM,CAAAD,QAAA,cACbxC,KAAA,CAACN,IAAI,CAACmD,KAAK,EAACC,SAAS,CAAC,QAAQ,CAAAN,QAAA,eAC7BtC,IAAA,CAACR,IAAI,CAACqD,KAAK,EAAAP,QAAA,CAAC,MAAI,EAAa,cAC7BtC,IAAA,CAACR,IAAI,CAACsD,OAAO,EACZC,IAAI,CAAC,MAAM,CACXC,IAAI,CAAC,IAAI,CACTb,KAAK,CAAE9B,OAAQ,CACf4C,QAAQ,CAAEhB,UAAW,CACrBiB,QAAQ,OACP,GACU,EACR,cACNlD,IAAA,CAACT,GAAG,EAACgD,EAAE,CAAC,MAAM,CAAAD,QAAA,cACbxC,KAAA,CAACN,IAAI,CAACmD,KAAK,EAACC,SAAS,CAAC,cAAc,CAAAN,QAAA,eACnCtC,IAAA,CAACR,IAAI,CAACqD,KAAK,EAAAP,QAAA,CAAC,OAAK,EAAa,cAC9BtC,IAAA,CAACR,IAAI,CAACsD,OAAO,EACZC,IAAI,CAAC,UAAU,CACfC,IAAI,CAAC,UAAU,CACfb,KAAK,CAAE1B,OAAQ,CACfwC,QAAQ,CAAEb,gBAAiB,CAC3Bc,QAAQ,OACP,GACU,EACR,GACD,cACNpD,KAAA,CAACH,WAAW,EAAC0C,SAAS,CAAC,MAAM,CAAAC,QAAA,eAC5BtC,IAAA,CAACP,MAAM,EAAC+C,OAAO,CAAC,SAAS,CAACO,IAAI,CAAC,QAAQ,CAACV,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,oBAEzD,EAAS,cACTtC,IAAA,CAACb,IAAI,EAACuD,EAAE,CAAC,SAAS,CAAAJ,QAAA,cACjBtC,IAAA,CAACP,MAAM,EAAC+C,OAAO,CAAC,SAAS,CAAAF,QAAA,CAAC,0BAAI,EAAS,EACjC,GACM,GACR,EACF,EAEP,EACU,CAEd,CAAC,CAED,cAAe,CAAArC,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}