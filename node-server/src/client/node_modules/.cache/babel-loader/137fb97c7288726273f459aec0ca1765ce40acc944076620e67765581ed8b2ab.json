{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Container}from\"react-bootstrap\";import React,{useRef,useState}from'react';import io from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MainPage(props){var socket=io();var myFaceRef=useRef(null);var muteRef=useRef(null);var cameraRef=useRef(null);var camerasRef=useRef(null);var callRef=useRef(null);var welcomeRef=useRef(null);var welcomeFormRef=useRef(null);var peerFaceRef=useRef(null);var _useState=useState(true),_useState2=_slicedToArray(_useState,2),hidden=_useState2[0],setHidden=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),welHidden=_useState4[0],setWelHidden=_useState4[1];var myStream;var muted=false;var cameraOff=false;var roomName;var myPeerConnection;var myDataChannel;function getCameras(){return _getCameras.apply(this,arguments);}function _getCameras(){_getCameras=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var devices,cameras,currentCamera;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return navigator.mediaDevices.enumerateDevices();case 3:devices=_context3.sent;cameras=devices.filter(function(device){return device.kind===\"videoinput\";});currentCamera=myStream.getVideoTracks()[0];cameras.forEach(function(camera){var option=document.createElement(\"option\");option.value=camera.deviceId;option.innerText=camera.label;if(currentCamera.label===camera.label){option.selected=true;}camerasRef.current.appendChild(option);});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 12:case\"end\":return _context3.stop();}},_callee3,null,[[0,9]]);}));return _getCameras.apply(this,arguments);}function getMedia(_x){return _getMedia.apply(this,arguments);}function _getMedia(){_getMedia=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(deviceId){var initialConstrains,cameraConstraints;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:initialConstrains={audio:true,video:{facingMode:\"user\"}};cameraConstraints={audio:true,video:{deviceId:{exact:deviceId}}};_context4.prev=2;_context4.next=5;return navigator.mediaDevices.getUserMedia(// deviceId가 있다면 특정 camera로, 없다면 셀프 카메라로 설정\ndeviceId?cameraConstraints:initialConstrains);case 5:myStream=_context4.sent;myFaceRef.current.srcObject=myStream;if(deviceId){_context4.next=10;break;}_context4.next=10;return getCameras();case 10:_context4.next=15;break;case 12:_context4.prev=12;_context4.t0=_context4[\"catch\"](2);console.log(_context4.t0);case 15:case\"end\":return _context4.stop();}},_callee4,null,[[2,12]]);}));return _getMedia.apply(this,arguments);}function handleMuteClick(){myStream.getAudioTracks().forEach(function(track){return track.enabled=!track.enabled;});if(!muted){muteRef.class.innerText=\"Unmute\";muted=true;}else{muteRef.class.innerText=\"Mute\";muted=false;}}function handleCameraClick(){myStream.getVideoTracks().forEach(function(track){return track.enabled=!track.enabled;});if(cameraOff){cameraRef.current.innerText=\"Turn Camera Off\";cameraOff=false;}else{cameraRef.current.innerText=\"Turn Camera On\";cameraOff=true;}}function handleCameraChange(){return _handleCameraChange.apply(this,arguments);}function _handleCameraChange(){_handleCameraChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var videoTrack,videoSender;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return getMedia(camerasRef.current.value);case 2:if(myPeerConnection){videoTrack=myStream.getVideoTracks()[0];videoSender=myPeerConnection.getSenders().find(function(sender){return sender.track.kind===\"video\";});videoSender.replaceTrack(videoTrack);}case 3:case\"end\":return _context5.stop();}},_callee5);}));return _handleCameraChange.apply(this,arguments);}function initCall(){return _initCall.apply(this,arguments);}function _initCall(){_initCall=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:setWelHidden(true);setHidden(false);_context6.next=4;return getMedia();case 4:makeConnection();case 5:case\"end\":return _context6.stop();}},_callee6);}));return _initCall.apply(this,arguments);}function handleWelcomeSubmit(_x2){return _handleWelcomeSubmit.apply(this,arguments);}function _handleWelcomeSubmit(){_handleWelcomeSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(event){var input;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:event.preventDefault();input=welcomeFormRef.current.querySelector(\"input\");_context7.next=4;return initCall();case 4:socket.emit(\"join_room\",input.value);roomName=input.value;input.value=\"\";case 7:case\"end\":return _context7.stop();}},_callee7);}));return _handleWelcomeSubmit.apply(this,arguments);}socket.on(\"welcome\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var offer;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:myDataChannel=myPeerConnection.createDataChannel(\"chat\");myDataChannel.addEventListener(\"message\",function(event){return console.log(event.data);});console.log(\"made data channel\");_context.next=5;return myPeerConnection.createOffer();case 5:offer=_context.sent;myPeerConnection.setLocalDescription(offer);console.log(\"sent the offer\");socket.emit(\"offer\",offer,roomName);case 9:case\"end\":return _context.stop();}},_callee);})));socket.on(\"offer\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(offer){var answer;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:myPeerConnection.addEventListener(\"datachannel\",function(event){myDataChannel=event.channel;myDataChannel.addEventListener(\"message\",function(event){return console.log(event.data);});});console.log(\"received the offer\");myPeerConnection.setRemoteDescription(offer);_context2.next=5;return myPeerConnection.createAnswer();case 5:answer=_context2.sent;myPeerConnection.setLocalDescription(answer);socket.emit(\"answer\",answer,roomName);console.log(\"sent the answer\");case 9:case\"end\":return _context2.stop();}},_callee2);}));return function(_x3){return _ref2.apply(this,arguments);};}());socket.on(\"answer\",function(answer){console.log(\"received the answer\");myPeerConnection.setRemoteDescription(answer);});socket.on(\"ice\",function(ice){console.log(\"received candidate\");myPeerConnection.addIceCandidate(ice);});// RTC Code\nfunction makeConnection(){myPeerConnection=new RTCPeerConnection({iceServers:[{urls:[\"stun:stun.l.google.com:19302\",\"stun:stun1.l.google.com:19302\",\"stun:stun2.l.google.com:19302\",\"stun:stun3.l.google.com:19302\",\"stun:stun4.l.google.com:19302\"]}]});myPeerConnection.addEventListener(\"icecandidate\",handleIce);myPeerConnection.addEventListener(\"track\",handleTrack);// 이 부분이 추가됩니다.\nmyStream.getTracks().forEach(function(track){return myPeerConnection.addTrack(track,myStream);});}function handleIce(data){console.log(\"sent candidate\");socket.emit(\"ice\",data.candidate,roomName);}// function handleAddStream(data) {\n//   if (peerFaceRef.current) {\n//     peerFaceRef.current.srcObject = data.stream;\n//   } else {\n//     console.log('peerFaceRef.current is not defined');\n//   }\n// }\nfunction handleTrack(event){if(peerFaceRef.current){peerFaceRef.current.srcObject=event.streams[0];}else{console.log('peerFaceRef.current is not defined');}}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uC601\\uC0C1\\uD1B5\\uD654\"}),/*#__PURE__*/_jsx(\"div\",{className:\"video\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{id:\"welcome\",ref:welcomeRef,style:{display:welHidden?\"none\":\"block\"},children:/*#__PURE__*/_jsxs(\"form\",{ref:welcomeFormRef,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"room name\",required:true,type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleWelcomeSubmit,children:\"Enter room\"})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"call\",ref:callRef,style:{display:hidden?\"none\":\"block\"},children:/*#__PURE__*/_jsxs(\"div\",{id:\"myStream\",children:[/*#__PURE__*/_jsx(\"video\",{id:\"myFace\",ref:myFaceRef,autoPlay:true,playsInline:true,width:\"400\",height:\"400\"}),/*#__PURE__*/_jsx(\"button\",{id:\"mute\",ref:muteRef,onClick:handleMuteClick,children:\"Mute\"}),/*#__PURE__*/_jsx(\"button\",{id:\"camera\",ref:cameraRef,onClick:handleCameraClick,children:\"Turn Camera Off\"}),/*#__PURE__*/_jsx(\"select\",{id:\"cameras\",ref:camerasRef,onChange:handleCameraChange}),/*#__PURE__*/_jsx(\"video\",{id:\"peerFace\",ref:peerFaceRef,autoPlay:true,playsInline:true,width:\"400\",height:\"400\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleWelcomeSubmit,children:\"teset\"})]})})]});}export default MainPage;","map":{"version":3,"names":["Container","React","useRef","useState","io","jsx","_jsx","jsxs","_jsxs","MainPage","props","socket","myFaceRef","muteRef","cameraRef","camerasRef","callRef","welcomeRef","welcomeFormRef","peerFaceRef","_useState","_useState2","_slicedToArray","hidden","setHidden","_useState3","_useState4","welHidden","setWelHidden","myStream","muted","cameraOff","roomName","myPeerConnection","myDataChannel","getCameras","_getCameras","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee3","devices","cameras","currentCamera","wrap","_callee3$","_context3","prev","next","navigator","mediaDevices","enumerateDevices","sent","filter","device","kind","getVideoTracks","forEach","camera","option","document","createElement","value","deviceId","innerText","label","selected","current","appendChild","t0","console","log","stop","getMedia","_x","_getMedia","_callee4","initialConstrains","cameraConstraints","_callee4$","_context4","audio","video","facingMode","exact","getUserMedia","srcObject","handleMuteClick","getAudioTracks","track","enabled","class","handleCameraClick","handleCameraChange","_handleCameraChange","_callee5","videoTrack","videoSender","_callee5$","_context5","getSenders","find","sender","replaceTrack","initCall","_initCall","_callee6","_callee6$","_context6","makeConnection","handleWelcomeSubmit","_x2","_handleWelcomeSubmit","_callee7","event","input","_callee7$","_context7","preventDefault","querySelector","emit","on","_callee","offer","_callee$","_context","createDataChannel","addEventListener","data","createOffer","setLocalDescription","_ref2","_callee2","answer","_callee2$","_context2","channel","setRemoteDescription","createAnswer","_x3","ice","addIceCandidate","RTCPeerConnection","iceServers","urls","handleIce","handleTrack","getTracks","addTrack","candidate","streams","children","className","id","ref","style","display","placeholder","required","type","onClick","autoPlay","playsInline","width","height","onChange"],"sources":["/Users/ban-yeongseo/Projects/straight-blue-wave/react-server/src/pages/MainPage.js"],"sourcesContent":["import {Container} from \"react-bootstrap\";\nimport React, {useRef, useState} from 'react';\nimport io from 'socket.io-client';\n\nfunction MainPage(props) {\n\n\tconst socket = io();\n    const myFaceRef = useRef(null);\n    const muteRef = useRef(null);\n    const cameraRef = useRef(null);\n    const camerasRef = useRef(null);\n    const callRef = useRef(null);\n    const welcomeRef = useRef(null);\n    const welcomeFormRef = useRef(null);\n    const peerFaceRef = useRef(null);\n    const [hidden, setHidden] = useState(true);\n    const [welHidden, setWelHidden] = useState(false);\n\n    let myStream;\n    let muted = false;\n    let cameraOff = false;\n    let roomName;\n    let myPeerConnection;\n    let myDataChannel;\n   \nasync function getCameras() {\n  try {\n    const devices = await navigator.mediaDevices.enumerateDevices();\n    const cameras = devices.filter((device) => device.kind === \"videoinput\");\n    const currentCamera = myStream.getVideoTracks()[0];\n    cameras.forEach((camera) => {\n      const option = document.createElement(\"option\");\n      option.value = camera.deviceId;\n      option.innerText = camera.label;\n      if (currentCamera.label === camera.label) {\n        option.selected = true;\n      }\n      camerasRef.current.appendChild(option);\n    });\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nasync function getMedia(deviceId) {\n  const initialConstrains = {\n    audio: true,\n    video: { facingMode: \"user\" },\n  };\n  const cameraConstraints = {\n    audio: true,\n    video: { deviceId: { exact: deviceId } },\n  };\n  try {\n    myStream = await navigator.mediaDevices.getUserMedia(\n      // deviceId가 있다면 특정 camera로, 없다면 셀프 카메라로 설정\n      deviceId ? cameraConstraints : initialConstrains\n    );\n    myFaceRef.current.srcObject = myStream;\n    if (!deviceId) {\n      await getCameras();\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nfunction handleMuteClick() {\n  myStream\n    .getAudioTracks()\n    .forEach((track) => (track.enabled = !track.enabled));\n  if (!muted) {\n    muteRef.class.innerText = \"Unmute\";\n    muted = true;\n  } else {\n    muteRef.class.innerText = \"Mute\";\n    muted = false;\n  }\n}\nfunction handleCameraClick() {\n  myStream\n    .getVideoTracks()\n    .forEach((track) => (track.enabled = !track.enabled));\n  if (cameraOff) {\n    cameraRef.current.innerText = \"Turn Camera Off\";\n    cameraOff = false;\n  } else {\n    cameraRef.current.innerText = \"Turn Camera On\";\n    cameraOff = true;\n  }\n}\n\nasync function handleCameraChange() {\n  // select 한 camera id를 기준으로 다시 getMedia를 통해 미디어 스트림을 가져옴\n  await getMedia(camerasRef.current.value);\n  if (myPeerConnection) {\n    const videoTrack = myStream.getVideoTracks()[0];\n    const videoSender = myPeerConnection\n      .getSenders()\n      .find((sender) => sender.track.kind === \"video\");\n    videoSender.replaceTrack(videoTrack);\n  }\n}\n\n\n\n\nasync function initCall() {\n  setWelHidden(true);\n  setHidden(false);\n  await getMedia();\n  makeConnection();\n}\n\nasync function handleWelcomeSubmit(event) {\n  event.preventDefault();\n  const input = welcomeFormRef.current.querySelector(\"input\");\n  await initCall();\n  socket.emit(\"join_room\", input.value);\n  roomName = input.value;\n  input.value = \"\";\n}\n\n\n\nsocket.on(\"welcome\", async () => {\n  myDataChannel = myPeerConnection.createDataChannel(\"chat\");\n  myDataChannel.addEventListener(\"message\", (event) => console.log(event.data));\n  console.log(\"made data channel\");\n  const offer = await myPeerConnection.createOffer();\n  myPeerConnection.setLocalDescription(offer);\n  console.log(\"sent the offer\");\n  socket.emit(\"offer\", offer, roomName);\n});\n\nsocket.on(\"offer\", async (offer) => {\n  myPeerConnection.addEventListener(\"datachannel\", (event) => {\n    myDataChannel = event.channel;\n    myDataChannel.addEventListener(\"message\", (event) =>\n      console.log(event.data)\n    );\n  });\n  console.log(\"received the offer\");\n  myPeerConnection.setRemoteDescription(offer);\n  const answer = await myPeerConnection.createAnswer();\n  myPeerConnection.setLocalDescription(answer);\n  socket.emit(\"answer\", answer, roomName);\n  console.log(\"sent the answer\");\n});\n\nsocket.on(\"answer\", (answer) => {\n  console.log(\"received the answer\");\n  myPeerConnection.setRemoteDescription(answer);\n});\n\nsocket.on(\"ice\", (ice) => {\n  console.log(\"received candidate\");\n  myPeerConnection.addIceCandidate(ice);\n});\n\n// RTC Code\n\nfunction makeConnection() {\n  myPeerConnection = new RTCPeerConnection({\n    iceServers: [\n      {\n        urls: [\n          \"stun:stun.l.google.com:19302\",\n          \"stun:stun1.l.google.com:19302\",\n          \"stun:stun2.l.google.com:19302\",\n          \"stun:stun3.l.google.com:19302\",\n          \"stun:stun4.l.google.com:19302\",\n        ],\n      },\n    ],\n  });\n  myPeerConnection.addEventListener(\"icecandidate\", handleIce);\nmyPeerConnection.addEventListener(\"track\", handleTrack); // 이 부분이 추가됩니다.\n  myStream.getTracks().forEach((track) => myPeerConnection.addTrack(track, myStream));\n\n}\n\nfunction handleIce(data) {\n  console.log(\"sent candidate\");\n  socket.emit(\"ice\", data.candidate, roomName);\n}\n// function handleAddStream(data) {\n//   if (peerFaceRef.current) {\n//     peerFaceRef.current.srcObject = data.stream;\n//   } else {\n//     console.log('peerFaceRef.current is not defined');\n//   }\n// }\nfunction handleTrack(event) {\n  if (peerFaceRef.current) {\n    peerFaceRef.current.srcObject = event.streams[0];\n  } else {\n    console.log('peerFaceRef.current is not defined');\n  }\n}\n\n\treturn (\n\t\t<Container>\n\t\t\t<h1>영상통화</h1>\n\t\t\t<div className=\"video\">\n        <div>\n            <div id=\"welcome\" ref={welcomeRef} \n                style={{display: welHidden ? \"none\" : \"block\"}}\n            >\n                <form ref={welcomeFormRef}>\n                    <input placeholder=\"room name\" required type=\"text\"/>\n                    <button onClick={handleWelcomeSubmit}>Enter room</button>\n                </form>\n            </div>\n            <div id=\"call\" ref={callRef}\n                style={{ display: hidden ? \"none\" : \"block\" }}\n            >\n                <div id=\"myStream\">\n                    <video id=\"myFace\"ref={myFaceRef} autoPlay playsInline width=\"400\" height=\"400\"></video>\n                    <button id=\"mute\" ref={muteRef} onClick={handleMuteClick}>Mute</button>\n                    <button id=\"camera\" ref={cameraRef} onClick={handleCameraClick}>Turn Camera Off</button>\n                    <select id=\"cameras\" ref={camerasRef} onChange={handleCameraChange}></select>\n                    <video id=\"peerFace\" ref={peerFaceRef} autoPlay playsInline width=\"400\" height=\"400\"></video>\n                </div>\n            </div>\n            <button onClick={handleWelcomeSubmit}>teset</button>\n        </div>\n\t\t\t</div>\n\t\t</Container>\n\t);\n}\n\nexport default MainPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}